# Avito Ranking Challenge

Решение задачи ранжирования объявлений по вероятности контакта с продавцом.

**Данные:**
- Train: 7.8M строк, 678K уникальных запросов
- Test: 335K строк
- Avg items/query: 11.5 объявлений на запрос
- Target: 4.41% contact rate (дисбаланс классов)

**Результат: NDCG@10 = 60%**

---

## Задача

Ранжировать объявления в поисковой выдаче так, чтобы релевантные оказались в топе.

---

## Решение

**Модель:** CatBoost Ranker (YetiRank loss)  
**Признаков:** 44 (BM25, match-индикаторы, статистики, ранги)  
**Валидация:** 82% NDCG с Out-of-Fold CV

**Ключевая находка:** Location match → +49% к конверсии (самый важный признак)

---

## Основные компоненты

**1. Feature Engineering**
- BM25 — текстовое сходство (реализация с нуля)
- Match-признаки — совпадение локации/категории
- Статистики — агрегаты по запросу (через OOF)
- Ранги — позиции внутри выдачи

**2. Out-of-Fold CV**

Статистические признаки вычисляются без data leakage через 5-fold GroupKFold

---

## Результаты

| Метрика | Значение |
|---------|----------|
| Test NDCG@10 | 60% |
| Val NDCG | 82.09% |
| Best iteration | 918 |
| Training time | ~3 часа (CPU) |

---

## Технологии

- Python 3.10+
- CatBoost
- Pandas, NumPy
- Scikit-learn (GroupKFold)

---

## Детали

Подробное описание EDA, feature engineering и оптимизаций — см. в ноутбуке.
